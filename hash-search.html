<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Hash 表的查找 | ALGORITHM-TUTORIAL</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/algorithm-tutorial/img/favicon.ico">
    <meta name="description" content="☕ algorithm-tutorial 是一个数据结构与算法教程。">
    <meta name="keywords" content="vuepress,theme,blog,vdoing">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/algorithm-tutorial/assets/css/0.styles.5ed860b4.css" as="style"><link rel="preload" href="/algorithm-tutorial/assets/js/app.fe785b0c.js" as="script"><link rel="preload" href="/algorithm-tutorial/assets/js/2.91ce5277.js" as="script"><link rel="preload" href="/algorithm-tutorial/assets/js/25.ec0d8024.js" as="script"><link rel="prefetch" href="/algorithm-tutorial/assets/js/10.107c327e.js"><link rel="prefetch" href="/algorithm-tutorial/assets/js/11.2fec7336.js"><link rel="prefetch" href="/algorithm-tutorial/assets/js/12.b55fdf6e.js"><link rel="prefetch" href="/algorithm-tutorial/assets/js/13.5f9a5cef.js"><link rel="prefetch" href="/algorithm-tutorial/assets/js/14.068c6d73.js"><link rel="prefetch" href="/algorithm-tutorial/assets/js/15.70be4a8f.js"><link rel="prefetch" href="/algorithm-tutorial/assets/js/16.8087d451.js"><link rel="prefetch" href="/algorithm-tutorial/assets/js/17.b0677b09.js"><link rel="prefetch" href="/algorithm-tutorial/assets/js/18.a1cc2021.js"><link rel="prefetch" href="/algorithm-tutorial/assets/js/19.f394aaac.js"><link rel="prefetch" href="/algorithm-tutorial/assets/js/20.0284ceba.js"><link rel="prefetch" href="/algorithm-tutorial/assets/js/21.25bb2d53.js"><link rel="prefetch" href="/algorithm-tutorial/assets/js/22.b1f31a26.js"><link rel="prefetch" href="/algorithm-tutorial/assets/js/23.834cd45f.js"><link rel="prefetch" href="/algorithm-tutorial/assets/js/24.063e120c.js"><link rel="prefetch" href="/algorithm-tutorial/assets/js/26.1433f331.js"><link rel="prefetch" href="/algorithm-tutorial/assets/js/27.a827f6fa.js"><link rel="prefetch" href="/algorithm-tutorial/assets/js/3.4fe76a9d.js"><link rel="prefetch" href="/algorithm-tutorial/assets/js/4.bb51c7f4.js"><link rel="prefetch" href="/algorithm-tutorial/assets/js/5.a848069e.js"><link rel="prefetch" href="/algorithm-tutorial/assets/js/6.24c3df5c.js"><link rel="prefetch" href="/algorithm-tutorial/assets/js/7.6f0d505e.js"><link rel="prefetch" href="/algorithm-tutorial/assets/js/8.9cac7dfa.js"><link rel="prefetch" href="/algorithm-tutorial/assets/js/9.b60f667a.js">
    <link rel="stylesheet" href="/algorithm-tutorial/assets/css/0.styles.5ed860b4.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open no-sidebar have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/algorithm-tutorial/" class="home-link router-link-active"><img src="https://raw.githubusercontent.com/dunwu/images/master/common/dunwu-logo.png" alt="ALGORITHM-TUTORIAL" class="logo"> <span class="site-name can-hide">ALGORITHM-TUTORIAL</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/dunwu/algorithm-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"> <a href="https://github.com/dunwu/algorithm-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <!----> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><!----> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/dunwu" target="_blank" title="作者" class="beLink" data-v-06225672>dunwu</a></div> <!----> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">Hash 表的查找<!----></h1>  <div class="theme-vdoing-content content__default"><h1 id="hash-表的查找"><a href="#hash-表的查找" class="header-anchor">#</a> Hash 表的查找</h1> <h2 id="要点"><a href="#要点" class="header-anchor">#</a> 要点</h2> <h3 id="哈希表和哈希函数"><a href="#哈希表和哈希函数" class="header-anchor">#</a> 哈希表和哈希函数</h3> <p>在记录的存储位置和它的关键字之间是建立一个确定的对应关系（映射函数），使每个关键字和一个存储位置能<strong>唯一对应</strong>。这个映射函数称为<strong>哈希函数</strong>，根据这个原则建立的表称为<strong>哈希表(Hash Table)</strong>，也叫<strong>哈希表</strong>。</p> <p>以上描述，如果通过数学形式来描述就是：</p> <p>若查找关键字为 <strong>key</strong>，则其值存放在 <strong>f(key)</strong> 的存储位置上。由此，<strong>不需比较便可直接取得所查记录</strong>。</p> <p><em><strong>注：哈希查找与线性表查找和树表查找最大的区别在于，不用数值比较。</strong></em></p> <h3 id="冲突"><a href="#冲突" class="header-anchor">#</a> 冲突</h3> <p>若 key1 ≠ key2 ，而 f(key1) = f(key2)，这种情况称为<strong>冲突(Collision)</strong>。</p> <p>根据哈希函数f(key)和处理冲突的方法将一组关键字映射到一个有限的连续的地址集（区间）上，并以关键字在地址集中的“像”作为记录在表中的存储位置，这一映射过程称为<strong>构造哈希表</strong>。</p> <p>构造哈希表这个场景就像汽车找停车位，如果车位被人占了，只能找空的地方停。</p> <p><img src="http://upload-images.jianshu.io/upload_images/3101171-4f4e0c3def86f7bb.jpg" alt="img" title="点击查看源网页"></p> <h2 id="构造哈希表"><a href="#构造哈希表" class="header-anchor">#</a> 构造哈希表</h2> <p>由以上内容可知，哈希查找本身其实不费吹灰之力，问题的关键在于如何构造哈希表和处理冲突。</p> <p>常见的构造哈希表的方法有 <code>5</code> 种：</p> <h3 id="直接定址法"><a href="#直接定址法" class="header-anchor">#</a> 直接定址法</h3> <p>说白了，就是小学时学过的<strong>一元一次方程</strong>。</p> <p>即 f(key) = a * key + b。其中，a和b 是常数。</p> <h3 id="数字分析法"><a href="#数字分析法" class="header-anchor">#</a> 数字分析法</h3> <p>假设关键字是R进制数（如十进制）。并且哈希表中<strong>可能出现的关键字都是事先知道的</strong>，则可选取关键字的若干数位组成哈希地址。</p> <p>选取的原则是使得到的哈希地址尽量避免冲突，即所选数位上的数字尽可能是随机的。</p> <h3 id="平方取中法"><a href="#平方取中法" class="header-anchor">#</a> 平方取中法</h3> <p>取关键字平方后的中间几位为哈希地址。通常在选定哈希函数时不一定能知道关键字的全部情况，仅取其中的几位为地址不一定合适；</p> <p>而一个数平方后的中间几位数和数的每一位都相关， 由此得到的哈希地址随机性更大。取的位数由表长决定。</p> <h3 id="除留余数法"><a href="#除留余数法" class="header-anchor">#</a> 除留余数法</h3> <p>取关键字被某个<strong>不大于哈希表表长</strong> m 的数 p 除后所得的余数为哈希地址。</p> <p>即 f(key) = key % p (p ≤ m)</p> <p>这是一种<strong>最简单、最常用</strong>的方法，它不仅可以对关键字直接取模，也可在折叠、平方取中等运算之后取模。</p> <p>注意：p的选择很重要，如果选的不好，容易产生冲突。根据经验，<strong>一般情况下可以选p为素数</strong>。</p> <h3 id="随机数法"><a href="#随机数法" class="header-anchor">#</a> 随机数法</h3> <p>选择一个随机函数，取关键字的随机函数值为它的哈希地址，即 f(key) = random(key)。</p> <p>通常，在关键字长度不等时采用此法构造哈希函数较为恰当。</p> <h2 id="解决冲突"><a href="#解决冲突" class="header-anchor">#</a> 解决冲突</h2> <p>设计合理的哈希函数可以减少冲突，但不能完全避免冲突。</p> <p>所以需要有解决冲突的方法，常见有两类：</p> <h3 id="开放定址法"><a href="#开放定址法" class="header-anchor">#</a> 开放定址法</h3> <p>如果两个数据元素的哈希值相同，则在哈希表中为后插入的数据元素另外选择一个表项。
当程序查找哈希表时，如果没有在第一个对应的哈希表项中找到符合查找要求的数据元素，程序就会继续往后查找，直到找到一个符合查找要求的数据元素，或者遇到一个空的表项。</p> <p><strong>示例</strong></p> <p>若要将一组关键字序列 {1, 9, 25, 11, 12, 35, 17, 29} 存放到哈希表中。</p> <p>采用除留余数法构造哈希表；采用开放定址法处理冲突。</p> <p>不妨设选取的p和m为13，由 f(key) = key % 13 可以得到下表。</p> <p><img src="https://upload-images.jianshu.io/upload_images/3101171-06a789e7f9b31da6.png" alt="img"></p> <p>需要注意的是，在上图中有两个关键字的探查次数为 2 ，其他都是1。</p> <p>这个过程是这样的：</p> <p>a. 12 % 13 结果是12，而它的前面有个 25 ，25 % 13 也是12，存在冲突。</p> <p>我们使用开放定址法 (12 + 1) % 13 = 0，没有冲突，完成。</p> <p>b. 35 % 13 结果是 9，而它的前面有个 9，9 % 13也是 9，存在冲突。</p> <p>我们使用开放定址法 (9 + 1) % 13 = 10，没有冲突，完成。</p> <h3 id="拉链法"><a href="#拉链法" class="header-anchor">#</a> 拉链法</h3> <p>将哈希值相同的数据元素存放在一个链表中，在查找哈希表的过程中，当查找到这个链表时，必须采用线性查找方法。</p> <p>在这种方法中，哈希表中每个单元存放的不再是记录本身，而是相应同义词单链表的头指针。</p> <p><strong>示例</strong></p> <p>如果对开放定址法示例中提到的序列使用拉链法，得到的结果如下图所示：</p> <p><img src="https://upload-images.jianshu.io/upload_images/3101171-c14e03882e8a0f3a.png" alt="img"></p> <h2 id="实现一个哈希表"><a href="#实现一个哈希表" class="header-anchor">#</a> 实现一个哈希表</h2> <p>假设要实现一个哈希表，要求</p> <p>a. 哈希函数采用<strong>除留余数法</strong>，即 f(key) = key % p (p ≤ m)</p> <p>b. 解决冲突采用<strong>开放定址法</strong>，即 f<sub>2</sub>(key) = (f(key)+i) % size (p ≤ m)</p> <p>（1）定义哈希表的数据结构</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">HashTable</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> key <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 关键字</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> data <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 数值</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 探查次数</span>
<span class="token punctuation">}</span>
</code></pre></div><p>（2）在哈希表中查找关键字key</p> <p>根据设定的哈希函数，计算哈希地址。如果出现地址冲突，则按设定的处理冲突的方法寻找下一个地址。</p> <p>如此反复，直到不冲突为止（查找成功）或某个地址为空（查找失败）。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * 查找哈希表
 * 构造哈希表采用除留取余法，即f(key) = key mod p (p ≤ size)
 * 解决冲突采用开放定址法，即f2(key) = (f(key) + i) mod p (1 ≤ i ≤ size-1)
 * ha为哈希表，p为模，size为哈希表大小，key为要查找的关键字
 */</span>
<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">searchHashTable</span><span class="token punctuation">(</span><span class="token class-name">HashTable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ha<span class="token punctuation">,</span> <span class="token keyword">int</span> p<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">,</span> <span class="token keyword">int</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> addr <span class="token operator">=</span> key <span class="token operator">%</span> p<span class="token punctuation">;</span> <span class="token comment">// 采用除留取余法找哈希地址</span>

    <span class="token comment">// 若发生冲突，用开放定址法找下一个哈希地址</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>ha<span class="token punctuation">[</span>addr<span class="token punctuation">]</span><span class="token punctuation">.</span>key <span class="token operator">!=</span> <span class="token constant">NULLKEY</span> <span class="token operator">&amp;&amp;</span> ha<span class="token punctuation">[</span>addr<span class="token punctuation">]</span><span class="token punctuation">.</span>key <span class="token operator">!=</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        addr <span class="token operator">=</span> <span class="token punctuation">(</span>addr <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> size<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>ha<span class="token punctuation">[</span>addr<span class="token punctuation">]</span><span class="token punctuation">.</span>key <span class="token operator">==</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> addr<span class="token punctuation">;</span> <span class="token comment">// 查找成功</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token constant">FAILED</span><span class="token punctuation">;</span> <span class="token comment">// 查找失败</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>（3）删除关键字为key的记录</p> <p>在采用开放定址法处理冲突的哈希表上执行删除操作，只能在被删记录上做删除标记，而不能真正删除记录。</p> <p>找到要删除的记录，将关键字置为删除标记DELKEY。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">deleteHashTable</span><span class="token punctuation">(</span><span class="token class-name">HashTable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ha<span class="token punctuation">,</span> <span class="token keyword">int</span> p<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">,</span> <span class="token keyword">int</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> addr <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    addr <span class="token operator">=</span> <span class="token function">searchHashTable</span><span class="token punctuation">(</span>ha<span class="token punctuation">,</span> p<span class="token punctuation">,</span> size<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">FAILED</span> <span class="token operator">!=</span> addr<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 找到记录</span>
        ha<span class="token punctuation">[</span>addr<span class="token punctuation">]</span><span class="token punctuation">.</span>key <span class="token operator">=</span> <span class="token constant">DELKEY</span><span class="token punctuation">;</span> <span class="token comment">// 将该位置的关键字置为DELKEY</span>
        <span class="token keyword">return</span> <span class="token constant">SUCCESS</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token constant">NULLKEY</span><span class="token punctuation">;</span> <span class="token comment">// 查找不到记录，直接返回NULLKEY</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>（4）插入关键字为key的记录</p> <p>将待插入的关键字key插入哈希表
先调用查找算法，若在表中找到待插入的关键字，则插入失败；
若在表中找到一个开放地址，则将待插入的结点插入到其中，则插入成功。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insertHashTable</span><span class="token punctuation">(</span><span class="token class-name">HashTable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ha<span class="token punctuation">,</span> <span class="token keyword">int</span> p<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">,</span> <span class="token keyword">int</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> addr <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    addr <span class="token operator">=</span> key <span class="token operator">%</span> p<span class="token punctuation">;</span> <span class="token comment">// 通过哈希函数获取哈希地址</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>ha<span class="token punctuation">[</span>addr<span class="token punctuation">]</span><span class="token punctuation">.</span>key <span class="token operator">==</span> <span class="token constant">NULLKEY</span> <span class="token operator">||</span> ha<span class="token punctuation">[</span>addr<span class="token punctuation">]</span><span class="token punctuation">.</span>key <span class="token operator">==</span> <span class="token constant">DELKEY</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果没有冲突，直接插入</span>
        ha<span class="token punctuation">[</span>addr<span class="token punctuation">]</span><span class="token punctuation">.</span>key <span class="token operator">=</span> key<span class="token punctuation">;</span>
        ha<span class="token punctuation">[</span>addr<span class="token punctuation">]</span><span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// 如果有冲突，使用开放定址法处理冲突</span>
        <span class="token keyword">do</span> <span class="token punctuation">{</span>
            addr <span class="token operator">=</span> <span class="token punctuation">(</span>addr <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> size<span class="token punctuation">;</span> <span class="token comment">// 寻找下一个哈希地址</span>
            i<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>ha<span class="token punctuation">[</span>addr<span class="token punctuation">]</span><span class="token punctuation">.</span>key <span class="token operator">!=</span> <span class="token constant">NULLKEY</span> <span class="token operator">&amp;&amp;</span> ha<span class="token punctuation">[</span>addr<span class="token punctuation">]</span><span class="token punctuation">.</span>key <span class="token operator">!=</span> <span class="token constant">DELKEY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        ha<span class="token punctuation">[</span>addr<span class="token punctuation">]</span><span class="token punctuation">.</span>key <span class="token operator">=</span> key<span class="token punctuation">;</span>
        ha<span class="token punctuation">[</span>addr<span class="token punctuation">]</span><span class="token punctuation">.</span>count <span class="token operator">=</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>（5）建立哈希表</p> <p>先将哈希表中各关键字清空，使其地址为开放的，然后调用插入算法将给定的关键字序列依次插入。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insertHashTable</span><span class="token punctuation">(</span><span class="token class-name">HashTable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ha<span class="token punctuation">,</span> <span class="token keyword">int</span> p<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">,</span> <span class="token keyword">int</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> addr <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    addr <span class="token operator">=</span> key <span class="token operator">%</span> p<span class="token punctuation">;</span> <span class="token comment">// 通过哈希函数获取哈希地址</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>ha<span class="token punctuation">[</span>addr<span class="token punctuation">]</span><span class="token punctuation">.</span>key <span class="token operator">==</span> <span class="token constant">NULLKEY</span> <span class="token operator">||</span> ha<span class="token punctuation">[</span>addr<span class="token punctuation">]</span><span class="token punctuation">.</span>key <span class="token operator">==</span> <span class="token constant">DELKEY</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果没有冲突，直接插入</span>
        ha<span class="token punctuation">[</span>addr<span class="token punctuation">]</span><span class="token punctuation">.</span>key <span class="token operator">=</span> key<span class="token punctuation">;</span>
        ha<span class="token punctuation">[</span>addr<span class="token punctuation">]</span><span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// 如果有冲突，使用开放定址法处理冲突</span>
        <span class="token keyword">do</span> <span class="token punctuation">{</span>
            addr <span class="token operator">=</span> <span class="token punctuation">(</span>addr <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> size<span class="token punctuation">;</span> <span class="token comment">// 寻找下一个哈希地址</span>
            i<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>ha<span class="token punctuation">[</span>addr<span class="token punctuation">]</span><span class="token punctuation">.</span>key <span class="token operator">!=</span> <span class="token constant">NULLKEY</span> <span class="token operator">&amp;&amp;</span> ha<span class="token punctuation">[</span>addr<span class="token punctuation">]</span><span class="token punctuation">.</span>key <span class="token operator">!=</span> <span class="token constant">DELKEY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        ha<span class="token punctuation">[</span>addr<span class="token punctuation">]</span><span class="token punctuation">.</span>key <span class="token operator">=</span> key<span class="token punctuation">;</span>
        ha<span class="token punctuation">[</span>addr<span class="token punctuation">]</span><span class="token punctuation">.</span>count <span class="token operator">=</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="完整示例"><a href="#完整示例" class="header-anchor">#</a> 完整示例</h3> <p><a href="https://github.com/dunwu/algorithm/blob/master/codes/src/main/java/io/github/dunwu/algorithm/search/HashDemo.java" target="_blank" rel="noopener noreferrer">示例代码<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="资源"><a href="#资源" class="header-anchor">#</a> 资源</h2> <p>《数据结构习题与解析》（B级第3版）</p></div></div> <div class="page-slot page-slot-bottom">
  <div class="wwads-cn wwads-horizontal pageB" data-id="136" style="width:100%;max-height:80px;min-height:auto;"></div>
  <style>
    .pageB img{width:80px!important;}
    .wwads-horizontal .wwads-text, .wwads-content .wwads-text{line-height:1;}
  </style>
  </div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/dunwu/algorithm-tutorial/edit/master/docs/hash-search.md" target="_blank" rel="noopener noreferrer">📝 帮助改善此页面！</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2025/12/19, 22:02:29</span></div></div> <div class="page-nav-wapper"><!----> <!----></div></div> <div class="article-list"><div class="article-title"><a href="/algorithm-tutorial/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/algorithm-tutorial/algorithm-template.html"><div>
            算法代码模板
            <!----></div></a> <span class="date"></span></dt></dl><dl><dd>02</dd> <dt><a href="/algorithm-tutorial/%E7%AE%97%E6%B3%95%E6%80%9D%E8%B7%AF.html"><div>
            算法思路
            <!----></div></a> <span class="date"></span></dt></dl><dl><dd>03</dd> <dt><a href="/algorithm-tutorial/%E7%AE%97%E6%B3%95%E7%BB%83%E4%B9%A0-%E6%A0%91.html"><div>
            数据结构 - 树
            <!----></div></a> <span class="date"></span></dt></dl> <dl><dd></dd> <dt><a href="/algorithm-tutorial/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:forbreak@163.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/dunwu" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2025
    <span>钝悟（dunwu） | CC-BY-SA-4.0</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><span class="close-but">×</span> <div>
    <div class="wwads-cn wwads-vertical windowRB" data-id="136" style="max-width:160px;
    min-width: auto;min-height:auto;"></div>
    <style>
      .windowRB{ padding: 0;}
      .windowRB .wwads-img{margin-top: 10px;}
      .windowRB .wwads-content{margin: 0 10px 10px 10px;}
      .custom-html-window-rb .close-but{
        display: none;
      }
    </style>
  </div></div></div></div><div class="global-ui"></div></div>
    <script src="/algorithm-tutorial/assets/js/app.fe785b0c.js" defer></script><script src="/algorithm-tutorial/assets/js/2.91ce5277.js" defer></script><script src="/algorithm-tutorial/assets/js/25.ec0d8024.js" defer></script>
  </body>
</html>
